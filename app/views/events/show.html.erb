<%

def hello(e)
    case e.location
    when 'Marseille'
      'rand_1.jpg'
    when 'Cassis'
      'rand_2.jpg'
    when 'Aix-en-Provence'
      'rand_3.jpg'
    when 'Fuveau'
      'rand_4.jpg'
    when 'Saint-Cyr'
      'rand_5.jpg'
    when 'Aubagne'
      'rand_6.jpg'
    when 'Ciotat'
      'rand_7.jpg'
    when 'Gemenos'
      'rand_8.jpg'
    else
      'PrisonMick.jpg'
    end
end

def difficult()
  case @event.difficulty
  when 'Facile'
    'facile'
  when 'Balade'
    'balade'
  when 'Intermédiaire'
    'inter'
  when 'Difficile'
    'difficile'
  when 'Sportif'
    'sportif'
  end
end
  %>

<section id="show" data-controller="weather">
<div class="row m-0 show_hike_map position-relative">
  <img src="/assets/<%= hello(@event) %>" class="col-12 p-0" alt='map show hike'>
  <h2 class="position-absolute text-center bottom-0 m-0" data-weather-target="location"><%= @event.location %></h2>
</div>
<div class="show_event_details p-3">
  <div class="row">
    <div class="col-12 d-flex justify-content-between align-items-center">
      <h6><i class="fa-solid fa-user"></i> <%= @event.bookings.count + 1 %> / <%= @event.group_size %></h6>
      <h6 class="difficulty <%= difficult() %>">Difficulté : <%= @event.difficulty %></h6>
    </div>
  </div>
  <div class="row">
    <div class="col-12 d-flex justify-content-between align-items-center">
      <% if @event.items.count > 0 %>
      <h6><%= link_to "Liste", event_items_path(event_id: @event.id) %></h6>
      <% else %>
      <h6><%= link_to "Ajoutez une liste", new_event_item_path(event_id: @event.id) %></h6>
      <% end %>
      <h6 data-weather-target="icon"></h6>
    </div>
  </div>
  <div class="row">
    <div class="col-12 d-flex justify-content-between align-items-center">
      <h6 data-weather-target="date_event"><%= @event.meeting_date.strftime('%d/%m/%Y') %></h6>
      <h6><%= @event.meeting_time.hour   %>h <%= @event.meeting_time.min %></h6>
    </div>
</div>

      <%= link_to "Rejoindre la chatroom", event_chatroom_path(@event, @event.chatroom), class: 'btn btn-success' %>

<%# VUE DE L'ORGANISATEUR DE L'EVENEMENT %>
<% if current_user == @event.user %>
<%= "Vous êtes l'organisateur de cet évènement" %>
<%# VUE DES PARTICIPANTS A L'EVENEMENT %>
<% elsif !@mybookings.where(event: @event).empty? %>
<%= "Vous participez à cet évènement" %>
<%= button_to "Se désinscrire de l'évenement", booking_path(@booking), method: :delete, class: 'btn btn-success' %>
<% else %>
<%# VUE DES VISITEURS   %>
<%= button_to "Rejoindre l'évenement", event_bookings_path(@event), method: :post, class: 'btn btn-success' %>
<% end %>
</section>
